<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz — GOC (Ajudante 2)</title>
<style>
  :root{--bg:#0f172a;--card:#111827;--ink:#e5e7eb;--mute:#94a3b8;--acc:#22d3ee;--good:#22c55e;--bad:#ef4444;}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue','Noto Sans',sans-serif}
  .wrap{max-width:980px;margin:40px auto;padding:0 16px}
  .card{background:linear-gradient(180deg,#0b1220 0,#0b1220ee 70%,#0b1220cc 100%),radial-gradient(1100px 500px at 110% -10%,#1f2937 0,#0b1220 60%);border:1px solid #1f2937;border-radius:18px;padding:20px 18px;box-shadow:0 10px 30px #0006}
  h1{font-size:1.6rem;margin:0 0 6px}
  .sub{color:var(--mute);margin:0 0 18px}
  select,button{font:inherit;color:var(--ink);background:#0b1220;border:1px solid #1f2937;border-radius:12px;padding:10px 12px}
  select:focus,button:focus{outline:2px solid var(--acc);outline-offset:2px}
  button.primary{background:#0b1220;border-color:#334155}
  button.primary:hover{border-color:#475569}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .pill{display:inline-flex;gap:10px;align-items:center;background:#0b1220;border:1px solid #1f2937;border-radius:999px;padding:8px 12px;font-size:.95rem;color:var(--mute)}
  .q{margin:14px 0 18px;padding:16px;border:1px solid #1f2937;border-radius:14px;background:#0b1220b3}
  .q h3{font-size:1rem;margin:0 0 10px}
  .opts{display:grid;gap:8px}
  .opt{display:flex;gap:10px;align-items:flex-start;padding:10px;border:1px solid #1f2937;border-radius:10px;background:#0b1220}
  .opt input{margin-top:3px;accent-color:var(--acc)}
  .badge{display:inline-block;padding:2px 8px;border-radius:999px;font-weight:600;font-size:.8rem}
  .ok{background:color-mix(in srgb, var(--good) 20%, transparent);border:1px solid var(--good);color:#bbf7d0}
  .ko{background:color-mix(in srgb, var(--bad) 15%, transparent);border:1px solid var(--bad);color:#fecaca}
  .explain{color:var(--mute);margin-top:8px;font-size:.94rem}
  .sticky{position:sticky;top:0;z-index:3;background:linear-gradient(#0f172a,#0f172aCC 80%,transparent);padding:10px 0 6px;margin:-10px 0 10px}
  .footer{display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-top:16px}
  .counts{display:flex;gap:8px;flex-wrap:wrap}
  .k{border:1px solid #1f2937;border-radius:10px;padding:6px 10px;color:var(--mute)}
  .score{font-weight:700}
  .muted{color:var(--mute)}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Quiz — GOC (Ajudante 2)</h1>
    <p class="sub">Responde às 50 questões (misturadas). Só no fim verás a correção e a nota (/20). Progresso é guardado localmente por sessão.</p>

    <div class="row" style="margin-bottom:12px">
      <label for="testSel" class="pill">Teste:
        <select id="testSel" style="margin-left:8px">
          <option value="GOC_AJ2">GOC — Ajudante 2</option>
        </select>
      </label>
      <button id="startBtn" class="primary">Começar / Reiniciar</button>
      <span class="pill">Progresso: <span id="prog">0/50</span></span>
      <span class="pill">Estado: <span id="state">Em resposta</span></span>
    </div>

    <div id="quizArea"></div>

    <div class="sticky">
      <div class="footer">
        <div class="counts">
          <span class="k">Certas: <strong id="cRight">0</strong></span>
          <span class="k">Erradas: <strong id="cWrong">0</strong></span>
          <span class="k">Em branco: <strong id="cBlank">50</strong></span>
          <span class="k score">Nota (/20): <strong id="score">–</strong></span>
        </div>
        <div class="row">
          <button id="submitBtn" class="primary">Entregar</button>
          <button id="exportBtn" title="Exportar resultados para .txt" disabled>Exportar .txt</button>
          <button id="clearBtn" title="Limpar progresso">Limpar</button>
        </div>
      </div>
    </div>

    <p class="muted" style="margin-top:8px">As perguntas e opções baralham a cada início.</p>
  </div>
</div>

<script>
function q(stem, options, correctIndex, explanation){ return { stem, options, correctIndex, explanation }; }
function shuffle(arr){ const a=arr.slice(); for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
function uid(){ return Math.random().toString(36).slice(2); }

const el = (q)=>document.querySelector(q);
const $quiz   = el('#quizArea');
const $prog   = el('#prog');
const $state  = el('#state');
const $score  = el('#score');
const $cRight = el('#cRight');
const $cWrong = el('#cWrong');
const $cBlank = el('#cBlank');
const $submit = el('#submitBtn');
const $start  = el('#startBtn');
const $export = el('#exportBtn');
const $clear  = el('#clearBtn');
const $sel    = el('#testSel');

let CURRENT = { testId:'GOC_AJ2', items:[], answers:{}, locked:false, evaluated:false, seed:'' };
function storageKey(){ return `be_quiz_${CURRENT.testId}`; }
function saveState(){ localStorage.setItem(storageKey(), JSON.stringify({ answers:CURRENT.answers, seed:CURRENT.seed })); }

/* ---------- TESTE GOC — Ajudante 2 (50 perguntas) ---------- */
const TEST_GOC_AJ2 = [
  q(`V/F — O conhecimento organizacional e os ativos intangíveis podem ser vistos como uma fonte de vantagem competitiva, por estarem enraizados na história e na cultura da empresa.`, [`Verdadeiro`,`Falso`], 0, `Ativos intangíveis/Conhecimento organizacional.`),
  q(`V/F — A cadeia de valor de Porter foi desenvolvida para analisar a concorrência exclusivamente através do preço final do produto.`, [`Verdadeiro`,`Falso`], 1, `Cadeia de valor (Porter).`),
  q(`V/F — Na cadeia de valor, as atividades primárias estão ligadas à criação física do produto, venda e assistência.`, [`Verdadeiro`,`Falso`], 0, `Atividades primárias.`),
  q(`V/F — Na cadeia de valor, as atividades de apoio são opcionais e não influenciam o desempenho das atividades primárias.`, [`Verdadeiro`,`Falso`], 1, `Atividades de apoio.`),
  q(`V/F — No processo de gestão estratégica, a execução ocorre antes da formulação estratégica.`, [`Verdadeiro`,`Falso`], 1, `Processo de gestão estratégica.`),
  q(`V/F — A análise interna e a gestão da cadeia de valor inserem-se na fase de formulação estratégica.`, [`Verdadeiro`,`Falso`], 1, `Análise e diagnóstico vs formulação.`),
  q(`V/F — Um fator motivador da mudança organizacional pode ser a necessidade de adaptação a novas realidades.`, [`Verdadeiro`,`Falso`], 0, `Fatores motivadores da mudança.`),
  q(`V/F — Resistências pessoais à mudança envolvem aspetos como hábitos e necessidades pessoais.`, [`Verdadeiro`,`Falso`], 0, `Resistência individual.`),
  q(`V/F — O gateway paralelo (BPMN) representa uma divisão do fluxo em dois ou mais ramos, executados em sequência.`, [`Verdadeiro`,`Falso`], 1, `Gateway paralelo.`),
  q(`V/F — No gateway paralelo, quando usado para reunir fluxos, o processo continua quando todos os fluxos anteriores são executados.`, [`Verdadeiro`,`Falso`], 0, `Gateway paralelo (junção).`),
  q(`V/F — Em gestão por processos, 'processo' é uma sequência de atividades que transforma entradas em saídas para atingir uma meta.`, [`Verdadeiro`,`Falso`], 0, `Definição de processo.`),
  q(`V/F — No modelo tradicional, é comum existirem estruturas hierárquicas rígidas e pesadas.`, [`Verdadeiro`,`Falso`], 0, `Modelo tradicional.`),
  q(`V/F — Na gestão por processos, é normal haver falhas no planeamento e controlo e decisões lentas.`, [`Verdadeiro`,`Falso`], 1, `Comparação: modelo tradicional vs processos.`),
  q(`V/F — Delegar é dar a um subordinado responsabilidade e autoridade para executar uma tarefa e tomar decisões.`, [`Verdadeiro`,`Falso`], 0, `Delegação (definição).`),
  q(`V/F — As principais etapas da delegação são: Instruir, Avaliar, Nomear, Controlar, Analisar.`, [`Verdadeiro`,`Falso`], 1, `Etapas: Analisar→Nomear→Instruir→Controlar→Avaliar.`),
  q(`No processo de gestão estratégica, qual é a sequência correta das fases (conforme slide)?`, [`Análise e diagnóstico → Formulação estratégica → Execução → Avaliação`,`Formulação estratégica → Execução → Avaliação → Análise e diagnóstico`,`Execução → Avaliação → Análise e diagnóstico → Formulação estratégica`,`Análise e diagnóstico → Execução → Formulação estratégica → Avaliação`], 0, `Ordem das fases.`),
  q(`A cadeia de valor de Porter foi desenvolvida para:`, [`Analisar e controlar as atividades de valor para que as empresas obtenham vantagem competitiva`,`Medir apenas o tempo de execução de tarefas`,`Substituir a análise SWOT`,`Avaliar exclusivamente a cultura organizacional`], 0, `Objetivo da cadeia de valor.`),
  q(`Na cadeia de valor, as atividades dividem-se em:`, [`Atividades primárias e atividades de apoio`,`Atividades internas e externas`,`Atividades financeiras e jurídicas`,`Atividades de poder e de papéis`], 0, `Categorias de atividades.`),
  q(`Qual das opções é uma atividade primária (Porter)?`, [`Operações`,`Gestão de recursos humanos`,`Infraestrutura da empresa`,`Desenvolvimento tecnológico`], 0, `Atividades primárias.`),
  q(`Qual das opções é uma atividade de apoio (Porter)?`, [`Infraestrutura da empresa`,`Marketing e vendas`,`Logística externa`,`Serviço (assistência)`], 0, `Atividades de apoio.`),
  q(`Segundo o slide, por que razão ativos intangíveis podem gerar vantagem competitiva?`, [`Porque estão enraizados na história e na cultura da empresa`,`Porque são fáceis de copiar pelos competidores`,`Porque dependem só de equipamento`,`Porque dispensam inovação e aprendizagem`], 0, `Ativos intangíveis.`),
  q(`A frase 'analisar oportunidades e ameaças do mercado não é suficiente' pretende sublinhar que:`, [`A análise externa deve ser complementada por análise interna (ex.: cadeia de valor)`,`Apenas a análise externa interessa`,`Apenas a análise interna interessa`,`A cadeia de valor substitui o diagnóstico`], 0, `Análise externa + interna.`),
  q(`As novas tecnologias facilitam a gestão estratégica sobretudo porque:`, [`Organizam e armazenam informações, relacionando as atividades da organização`,`Eliminam a necessidade de planeamento`,`Substituem a liderança`,`Tornam desnecessária a avaliação`], 0, `Tecnologias na gestão.`),
  q(`No slide das abordagens alternativas da gestão da mudança, as intervenções efetivas dependem fundamentalmente do:`, [`Modelo de intervenção utilizado`,`Número de reuniões mensais`,`Orçamento de comunicação`,`Tipo de benchmarking escolhido`], 0, `Modelo de intervenção.`),
  q(`Na gestão da mudança pela razão, a abordagem baseia-se em:`, [`Escolha racional e persuasão`,`Uso arbitrário do poder`,`Imposição sem informação`,`Redução de metas e indicadores`], 0, `Mudança pela razão.`),
  q(`Na resistência à mudança de âmbito individual, qual é um exemplo indicado no slide?`, [`Hábitos`,`Discussões técnicas`,`Dificuldades operacionais`,`Argumentos económico-financeiros`], 0, `Resistência individual.`),
  q(`Na resistência à mudança de âmbito organizacional, qual é um exemplo indicado no slide?`, [`Discussões técnicas`,`Inseguranças`,`Características de personalidade`,`Grau de conhecimento`], 0, `Resistência organizacional.`),
  q(`No gateway paralelo (BPMN), quando o processo se divide em dois ou mais ramos:`, [`Todos os ramos depois do gateway são executados`,`Apenas um ramo é executado (exclusivo)`,`Os ramos são executados por ordem alfabética`,`O processo termina automaticamente`], 0, `Gateway paralelo.`),
  q(`O BPMN é também conhecido como:`, [`ISO 19510`,`ISO 9001`,`ISO 14001`,`ISO 45001`], 0, `Norma associada.`),
  q(`Segundo o slide, BPM (Business Process Management) é uma visão:`, [`Holística de organizar, estruturar e conduzir o negócio`,`Apenas financeira de conduzir o negócio`,`Apenas jurídica de conduzir o negócio`,`Exclusivamente tecnológica`], 0, `BPM (visão holística).`),
  q(`No modelo tradicional (vs gestão por processos), qual das seguintes características surge no slide?`, [`Empresas voltadas para o interior`,`Empresas orientadas por processos ponta-a-ponta`,`Estruturas leves e flexíveis`,`Custos reduzidos associados à melhoria`], 0, `Modelo tradicional.`),
  q(`De acordo com o slide, 'processo' é:`, [`Uma sequência definida de atividades/etapas com o objetivo de atingir uma meta`,`Um conjunto de pessoas numa hierarquia`,`Um documento formal (manual) de procedimentos`,`Um indicador de desempenho`], 0, `Definição de processo.`),
  q(`De forma sintética (slide), processos transformam:`, [`Entradas em produtos/serviços (saídas)`,`Produtos em entradas`,`Metas em indicadores`,`Decisões em organigramas`], 0, `Entradas → saídas.`),
  q(`Segundo o slide, benchmarking é uma ferramenta que permite comparar:`, [`Produtos/serviços/processos para avaliar performance e eficiência`,`Apenas salários entre departamentos`,`Apenas organigramas entre instituições`,`Apenas horários de trabalho`], 0, `Benchmarking (definição).`),
  q(`No PDCA, a fase P (Plan) consiste em:`, [`Estabelecer objetivos e processos necessários para atingir resultados projetados`,`Executar o processo e recolher dados finais`,`Corrigir desvios e padronizar imediatamente`,`Eliminar indicadores`], 0, `P — Planear.`),
  q(`No slide 'Tempo como Recurso', Chronos significa:`, [`Tempo cronológico/sequencial que pode ser medido`,`Momento oportuno (momento certo)`,`Tempo subjetivo impossível de medir`,`Tempo de descanso semanal`], 0, `Chronos.`),
  q(`No mesmo slide, Kairos significa:`, [`O momento certo/oportuno`,`Tempo cronológico/sequencial`,`Tempo medido em horas`,`Tempo de execução de processos`], 0, `Kairos.`),
  q(`Segundo o slide, gestão do tempo (nível individual) é a arte de organizar a vida com o intuito de:`, [`Controlar os acontecimentos e evitar períodos de tempo desperdiçados`,`Aumentar burocracia`,`Eliminar planeamento`,`Evitar definição de prioridades`], 0, `Gestão do tempo.`),
  q(`No slide, a gestão do tempo consiste em:`, [`Registar, controlar e melhorar a utilização do nosso tempo`,`Apenas trabalhar mais horas`,`Apenas usar tecnologia`,`Apenas reduzir reuniões`], 0, `Registar/Controlar/Melhorar.`),
  q(`Qual das opções aparece no slide como ação ligada à gestão do tempo?`, [`Planear / Priorizar`,`Delegar / Subdelegar`,`Certificar / Acreditar`,`Reeducar / Punir`], 0, `Ação no slide.`),
  q(`No slide, uma ação recomendada é:`, [`Eliminar tarefas desnecessárias ou ineficazes`,`Adicionar tarefas redundantes`,`Evitar qualquer autoavaliação`,`Aumentar o número de interrupções`], 0, `Eliminar tarefas.`),
  q(`Principais fatores de gestão do tempo (slide) incluem:`, [`Ambiente organizacional, ritmo de mudança, expetativas e perceção`,`Missão, visão, valores e vetores estratégicos`,`Poder, papéis, tarefas e pessoas`,`Interno, competitivo, funcional e genérico`], 0, `Fatores.`),
  q(`No slide 'Desperdiçar Tempo', as categorias apresentadas são:`, [`Individual, estrutural, cultural, ambiental e organizacional`,`Interno, externo, técnico, económico e social`,`Sanitária, social, económica e profissional`,`Planeamento, execução, controlo e avaliação`], 0, `Categorias.`),
  q(`No mesmo slide, 'performance' resulta de:`, [`Fazer as coisas certas (eficácia) e fazê-las bem (eficiência)`,`Fazer muitas coisas rapidamente`,`Fazer as coisas mais baratas`,`Fazer tudo sozinho`], 0, `Eficácia + eficiência.`),
  q(`Na organização do trabalho (slide), a utilização eficaz do tempo demonstra:`, [`Comprometimento com a empresa`,`Apenas antiguidade`,`Apenas flexibilidade de horários`,`Apenas motivação do avaliador`], 0, `Comprometimento.`),
  q(`Na organização e condução de reuniões, uma medida indicada é:`, [`Elaborar uma agenda com hora de início/fim e tempo limite por ponto`,`Convocar o máximo de pessoas possível`,`Evitar comunicar objetivos`,`Não distribuir agenda antecipadamente`], 0, `Agenda/tempo.`),
  q(`Na delegação de tarefas (slide), delegar é:`, [`Dar a um subordinado a responsabilidade de um trabalho e decisões afins`,`Retirar autoridade e responsabilidade ao subordinado`,`Atribuir tarefas sem definir expectativas`,`Transferir sempre a responsabilidade para o superior`], 0, `Definição de delegar.`),
  q(`Qual é a ordem correta das principais etapas da delegação (slide)?`, [`Analisar → Nomear → Instruir → Controlar → Avaliar`,`Nomear → Analisar → Avaliar → Instruir → Controlar`,`Instruir → Controlar → Nomear → Analisar → Avaliar`,`Avaliar → Controlar → Instruir → Nomear → Analisar`], 0, `Etapas.`),
  q(`O plano de ação pessoal é apresentado como uma ferramenta utilizada para:`, [`Definir objetivos individuais e melhorar desempenho pessoal e profissional`,`Avaliar exclusivamente a concorrência`,`Substituir a gestão do tempo`,`Eliminar metas e indicadores`], 0, `Plano de ação.`),
  q(`Qual dos seguintes é um elemento do Plano de Ação Pessoal (slide)?`, [`Flexível e ajustável`,`Secreto e imutável`,`Exclusivamente coletivo`,`Irrealista`], 0, `Elementos do plano.`)
];

let quizChangeHandler=null;

function build(testId){
  CURRENT.testId=testId;
  const base=TEST_GOC_AJ2;

  CURRENT.seed=uid();

  const items = shuffle(base).map((qItem,i)=>{
    const idxMap = Array.from({length:qItem.options.length}, (_,k)=>k);
    const shuffledIdxs = shuffle(idxMap);
    const opts = shuffledIdxs.map(k=>qItem.options[k]);
    const correct = shuffledIdxs.indexOf(qItem.correctIndex);
    return {
      id:`${testId}-${i+1}`,
      stem:qItem.stem,
      opts:opts,
      correct:correct,
      explanation:qItem.explanation||''
    };
  });

  CURRENT.items = items.slice(0, 50);
  CURRENT.answers = {};
  CURRENT.locked=false;
  CURRENT.evaluated=false;

  if(quizChangeHandler) $quiz.removeEventListener('change', quizChangeHandler);
  render();
  localStorage.removeItem(storageKey());
  updateCounts();
}

function render(){
  $quiz.innerHTML='';
  CURRENT.items.forEach((qItem, idx)=>{
    const wrap=document.createElement('div');
    wrap.className='q';
    wrap.dataset.qid=qItem.id;

    const h=document.createElement('h3');
    h.innerHTML=`<span class="muted">Q${idx+1}.</span> ${qItem.stem}`;

    const opts=document.createElement('div');
    opts.className='opts';

    qItem.opts.forEach((opt, i)=>{
      const id=`${qItem.id}-o${i}`;
      const line=document.createElement('label');
      line.className='opt';
      line.innerHTML=`
        <input type="radio" name="${qItem.id}" id="${id}" value="${i}">
        <div>${opt}</div>
      `;
      opts.appendChild(line);
    });

    wrap.appendChild(h);
    wrap.appendChild(opts);
    $quiz.appendChild(wrap);
  });

  $state.textContent='Em resposta';
  $score.textContent='–';
  $cRight.textContent='0';
  $cWrong.textContent='0';
  $cBlank.textContent=String(CURRENT.items.length);
  $export.disabled=true;

  quizChangeHandler=onSelect;
  $quiz.addEventListener('change', quizChangeHandler, { passive:true });
}

function onSelect(e){
  if(!e.target || e.target.type!=='radio') return;
  if(CURRENT.locked) return;
  CURRENT.answers[e.target.name]=Number(e.target.value);
  saveState();
  updateCounts();
}

function updateCounts(){
  const answered=Object.keys(CURRENT.answers).length;
  $prog.textContent=`${answered}/${CURRENT.items.length}`;
  $cBlank.textContent=String(CURRENT.items.length-answered);
}

function evaluate(){
  CURRENT.locked=true;
  CURRENT.evaluated=true;
  $state.textContent='Corrigido';
  let right=0, wrong=0;

  document.querySelectorAll('.q').forEach(qEl=>{
    const qid=qEl.dataset.qid;
    const item=CURRENT.items.find(x=>x.id===qid);
    const chosen=CURRENT.answers[qid];
    const correct=item.correct;

    const labels=qEl.querySelectorAll('.opt');
    labels.forEach((lab,i)=>{
      const input=lab.querySelector('input');
      input.disabled=true;
      if(i===correct) lab.classList.add('ok');
      if(chosen!==undefined && i===chosen && chosen!==correct) lab.classList.add('ko');
    });

    const badge=document.createElement('span');
    badge.className='badge ' + (chosen===correct ? 'ok' : 'ko');
    badge.textContent=(chosen===correct ? 'Correto' : (chosen===undefined ? 'Em branco' : 'Incorreto'));
    qEl.querySelector('h3').appendChild(document.createTextNode(' '));
    qEl.querySelector('h3').appendChild(badge);

    const exp=document.createElement('div');
    exp.className='explain';
    const correctTxt=item.opts[correct];

    if(chosen===correct) right++;
    else if(chosen===undefined) { /* branco */ }
    else wrong++;

    const showExplain = (chosen!==correct) && item.explanation;
    exp.innerHTML = `<strong>Resposta correta:</strong> ${correctTxt}` + (showExplain ? ` — <em>${item.explanation}</em>` : ``);
    qEl.appendChild(exp);
  });

  const blanks=CURRENT.items.length-(right+wrong);
  const note20=(right/CURRENT.items.length)*20;
  $cRight.textContent=String(right);
  $cWrong.textContent=String(wrong);
  $cBlank.textContent=String(blanks);
  $score.textContent=note20.toFixed(1);
  $export.disabled=false;
  saveState();
}

function exportTxt(){
  const lines=[];
  lines.push(`Teste ${CURRENT.testId} — Resultados`);
  lines.push(`Certas: ${$cRight.textContent}`);
  lines.push(`Erradas: ${$cWrong.textContent}`);
  lines.push(`Em branco: ${$cBlank.textContent}`);
  lines.push(`Nota (/20): ${$score.textContent}`);
  lines.push('');
  CURRENT.items.forEach((it,i)=>{
    const chosen=CURRENT.answers[it.id];
    const mark=(chosen===undefined)?'—':String.fromCharCode(65+chosen);
    const ok=String.fromCharCode(65+it.correct);
    lines.push(`Q${i+1}. ${it.stem}`);
    it.opts.forEach((op,idx)=>{
      const tag=String.fromCharCode(65+idx);
      const sel=(idx===chosen)?'*':' ';
      const cor=(idx===it.correct)?' (correta)':'';
      lines.push(`  ${sel} ${tag}) ${op}${cor}`);
    });
    lines.push(`  → Tua resposta: ${mark} | Correta: ${ok}`);
    lines.push('');
  });
  const blob=new Blob([lines.join('\n')], {type:'text/plain'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url;
  a.download=`resultado_teste_${CURRENT.testId}.txt`;
  a.click();
  setTimeout(()=>URL.revokeObjectURL(url), 1000);
}

function clearProgress(){ localStorage.removeItem(storageKey()); build($sel.value); }

$start.addEventListener('click', ()=>build($sel.value));
$submit.addEventListener('click', ()=>{
  const answered=Object.keys(CURRENT.answers).length;
  if(answered<CURRENT.items.length){
    const remain=CURRENT.items.length-answered;
    if(!confirm(`Tens ${remain} pergunta(s) por responder. Queres entregar na mesma?`)) return;
  }
  evaluate();
});
$export.addEventListener('click', exportTxt);
$clear.addEventListener('click', clearProgress);
$sel.addEventListener('change', ()=>build($sel.value));

build($sel.value);
</script>
</body>
</html>
